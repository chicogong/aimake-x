name = "ainavapi"
main = "src/index.js"
compatibility_date = "2024-01-01"

[assets]
directory = "../frontend/dist"
binding = "ASSETS"

# 构建配置
[build]
command = ""

# 禁用 minify 以支持 emoji
minify = false

# 自定义域名配置
[[routes]]
pattern = "x.aimake.cc"
custom_domain = true

# 环境变量（生产环境使用 wrangler secret 设置敏感信息）
[vars]
ENVIRONMENT = "production"

# Turnstile 人机验证配置
# 1. 访问 Cloudflare Dashboard -> Turnstile 创建站点
# 2. 获取 Site Key (公开，前端使用) 和 Secret Key (私密，后端使用)
# 3. 更新前端 index.html 中的 data-sitekey
# 4. 使用命令设置 Secret Key:
#    echo "your_secret_key" | npx wrangler secret put TURNSTILE_SECRET_KEY
# TURNSTILE_SECRET_KEY 在生产环境必须设置

# D1 数据库配置（需要先创建：wrangler d1 create ai-nav-db）
# [[d1_databases]]
# binding = "DB"
# database_name = "ai-nav-db"
# database_id = "your-database-id"

# KV 缓存配置（需要先创建：wrangler kv:namespace create CACHE）
# [[kv_namespaces]]
# binding = "CACHE"
# id = "your-kv-id"
